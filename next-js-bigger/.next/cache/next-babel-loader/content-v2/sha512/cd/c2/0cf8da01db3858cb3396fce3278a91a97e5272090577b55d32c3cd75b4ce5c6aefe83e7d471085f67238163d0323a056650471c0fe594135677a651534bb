{"ast":null,"code":"// /api/new-meetup     is going to be the endpoint url\nimport { MongoClient } from \"mongodb\";\n\nconst handler = async (req, res) => {\n  if (req.method === 'POST') {\n    const data = req.body; //\n    // const client = await MongoClient.connect('mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority')\n    //\n    // const db = client.db\n    //\n    // const meetupsCollection = db.collection('meetups')\n    // const result = await meetupsCollection.insertOne(data)\n    //\n    // console.log(result)\n    //\n    // await client.close()\n    //\n    // res.status(201).json({message: 'Meetup inserted'})\n\n    const {\n      MongoClient\n    } = require('mongodb');\n\n    const uri = \"mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority\";\n    const client = new MongoClient(uri, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n    client.connect(err => {\n      const collection = client.db(\"meetups\").collection(\"meetups\");\n      const result = collection.insertOne(data);\n      console.log(result);\n      client.close();\n      res.status(201).json({\n        message: 'Meetup inserted'\n      });\n    });\n  }\n};\n\nexport default handler;","map":{"version":3,"sources":["C:/Users/alarovoi/Desktop/projects/udemy-react-course/next-js-bigger/pages/api/new-meetup.js"],"names":["MongoClient","handler","req","res","method","data","body","require","uri","client","useNewUrlParser","useUnifiedTopology","connect","err","collection","db","result","insertOne","console","log","close","status","json","message"],"mappings":"AAAA;AACA,SAAQA,WAAR,QAA0B,SAA1B;;AAEA,MAAMC,OAAO,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACvB,UAAMC,IAAI,GAAGH,GAAG,CAACI,IAAjB,CADuB,CAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAAM;AAAEN,MAAAA;AAAF,QAAkBO,OAAO,CAAC,SAAD,CAA/B;;AACA,UAAMC,GAAG,GAAG,wGAAZ;AACA,UAAMC,MAAM,GAAG,IAAIT,WAAJ,CAAgBQ,GAAhB,EAAqB;AAAEE,MAAAA,eAAe,EAAE,IAAnB;AAAyBC,MAAAA,kBAAkB,EAAE;AAA7C,KAArB,CAAf;AACAF,IAAAA,MAAM,CAACG,OAAP,CAAeC,GAAG,IAAI;AAClB,YAAMC,UAAU,GAAGL,MAAM,CAACM,EAAP,CAAU,SAAV,EAAqBD,UAArB,CAAgC,SAAhC,CAAnB;AACA,YAAME,MAAM,GAAGF,UAAU,CAACG,SAAX,CAAqBZ,IAArB,CAAf;AACAa,MAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACAP,MAAAA,MAAM,CAACW,KAAP;AACAjB,MAAAA,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,OAAO,EAAE;AAAV,OAArB;AACH,KAND;AASH;AACH,CA9BD;;AAgCA,eAAetB,OAAf","sourcesContent":["// /api/new-meetup     is going to be the endpoint url\r\nimport {MongoClient} from \"mongodb\";\r\n\r\nconst handler = async (req, res) => {\r\n   if (req.method === 'POST') {\r\n       const data = req.body\r\n       //\r\n       // const client = await MongoClient.connect('mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority')\r\n       //\r\n       // const db = client.db\r\n       //\r\n       // const meetupsCollection = db.collection('meetups')\r\n       // const result = await meetupsCollection.insertOne(data)\r\n       //\r\n       // console.log(result)\r\n       //\r\n       // await client.close()\r\n       //\r\n       // res.status(201).json({message: 'Meetup inserted'})\r\n\r\n       const { MongoClient } = require('mongodb');\r\n       const uri = \"mongodb+srv://mthrfckr:0YRCwLmXQkFAygzH@cluster0.l1nje.mongodb.net/meetups?retryWrites=true&w=majority\";\r\n       const client = new MongoClient(uri, { useNewUrlParser: true, useUnifiedTopology: true });\r\n       client.connect(err => {\r\n           const collection = client.db(\"meetups\").collection(\"meetups\");\r\n           const result = collection.insertOne(data)\r\n           console.log(result)\r\n           client.close();\r\n           res.status(201).json({message: 'Meetup inserted'})\r\n       });\r\n\r\n\r\n   }\r\n}\r\n\r\nexport default handler\r\n"]},"metadata":{},"sourceType":"module"}